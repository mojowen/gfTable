<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<script src="../lib/jquery-latest.js"></script>
	<script src="../lib/knockout-latest.debug.js"></script>
	<script src="../lib/lib.js"></script>
	
	<script src="../stringTemplate.js" type="text/javascript" charset="utf-8"></script>
	<script src="../table.js" type="text/javascript" charset="utf-8"></script>

  <link rel="stylesheet" href="qunit.css" type="text/css" media="screen" />
	<script type="text/javascript" src="qunit.js"></script>

<script>
// set up
var _rows = [], 
	_fields = [
		{name: 'key', type: 'number'},
		{name: 'name', type: 'string'},
		{name: 'select', type: 'select', options: ['First','Second','Third','Fourth']},
		{name: 'number', type: 'number'},
		{name: 'block', type: 'block'},
		{name: 'date', type: 'date'}
	]

for (var i=0; i < 100; i++) _rows.push( {
		key: (i+1), 
		name: makeString(10),
		select: ['First','Second','Third','Fourth'][Math.floor( Math.random()*4)],
		block: [
				makeString(Math.floor(Math.random()*20+10)),
				makeString(Math.floor(Math.random()*20+10)),
				makeString(Math.floor(Math.random()*20+10))
			].join("\n"), 
		date: '11/'+i+'/11', 
		number: Math.round(Math.random()*10) 
	});

var grid = new tableModel(_rows, _fields);

$(document).ready(function(){
	ko.setTemplateEngine(createStringTemplateEngine(new ko.nativeTemplateEngine(), grid.templates));
	ko.applyBindings( grid );

	test("Basic Rendering", function() {
		ok( true, "no flags pass" );
		equal( $('.table .row').length, _rows.length , "All the rows render" )
		equal( $('.table .row:first .entry').length, _fields.length , "All fields render" )
	});
	test('Scrolling', function() {
		$('.body').scrollLeft(100)
		equal($('.body').scrollLeft(),$('.header').scrollLeft(),'Horizontal scrolls are synced')
	})
});
</script>
  
</head>
<body>
	<h1 id="qunit-header">QUnit example</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">
		<div class="table" data-bind="table: grid"></div>
	</div>
</body>
</html>