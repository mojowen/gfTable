<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>index</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Scott Duncombe">
	<!-- Date: 2012-06-08 -->
	<script src="lib/jquery-latest.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/jquery-ui.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/knockout-latest.debug.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/lib.js" type="text/javascript" charset="utf-8"></script>
	<script src="stringTemplate.js" type="text/javascript" charset="utf-8"></script>
	<script src="table.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="table.css" type="text/css" media="screen" title="no title" charset="utf-8">
	
	<style type="text/css" media="screen">
		body {
			font-family: Helvetica, sans-serif;
		}
	</style>
</head>
<body>

	<div class="table" data-bind="template: {name: 'table', with: grid } "></div>

	<script type="text/javascript" charset="utf-8">
		var _rows = [], 
			_fields = [
				{name: 'key', type: 'number'},
				{name: 'name', type: 'string'},
				{name: 'select', type: 'select', options: ['First','Second','Third','Fourth']},
				{name: 'number', type: 'number'},
				{name: 'block', type: 'block'},
				{name: 'date', type: 'date'}
				{name: 'date', type: 'date'},
				{name: 'multiselect', type: 'multiselect', options: ['Illinois','Portugal','Spain','Texas','Colorado','Washington','Montana','Oregon']}
				{name: 'array', type: 'array', options: {} }
			]

		for (var i=0; i < 100; i++) _rows.push( {
			key: ko.observable(i+1), 
			name: makeString(10),
			select: ['First','Second','Third','Fourth'][Math.floor( Math.random()*4)],
			block: [
			multiselect: ko.observable( [
				[null,'Illinois'][Math.floor( Math.random()*2)],
				[null,'Portugal'][Math.floor( Math.random()*2) ],
				[null,'Spain',][Math.floor( Math.random()*2) ],
				[null,'Texas',][Math.floor( Math.random()*2) ],
				[null,'Colorado',][Math.floor( Math.random()*2) ],
				[null,'Washington',][Math.floor( Math.random()*2) ],
				[null,'Montana',][Math.floor( Math.random()*2) ],
				[null,'Oregon'][Math.floor( Math.random()*2) ]
				 ].filter( function(el) { return el != null }) ),
			block: ko.observable( [
					makeString(Math.floor(Math.random()*20+10)),
					makeString(Math.floor(Math.random()*20+10)),
					makeString(Math.floor(Math.random()*20+10))
				].join("\n") ),
			date: ko.observable( (function() { var d = new Date('1/1/11'); d.setDate(i+1); return d.toDateString() })() ),
			number: ko.observable(Math.round(Math.random()*10) )
		});

		var grid = new tableModel(_rows, _fields);
		ko.setTemplateEngine(createStringTemplateEngine(new ko.nativeTemplateEngine(), grid.__templates));
		ko.applyBindings( grid );

	</script>
</body>
</html>
